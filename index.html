<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>四层滚动网页</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        .container {
            height: 100vh;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .section {
            height: 100vh; /* 恢复原始高度 */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            color: white;
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .section1 {
            background: url('img/home1_b1.jpg') center/cover no-repeat; /* 恢复背景效果 */
            /* background-color: #333; */ /* 移除替代背景色 */
        }

        .section2 {
            display: flex;
            position: relative;
        }

        .section2 .image-part {
            flex: 1;
            height: 100vh;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .section2 .image-part:nth-child(1) {
            background-image: url('img/home2_b1.jpg');
        }

        .section2 .image-part:nth-child(2) {
            background-image: url('img/home2_b2.jpg');
        }

        

        .section3 {
            background: url('img/home3_b1.jpg') center/cover no-repeat;
        }

        .section4 {
            background: url('img/home4_b1.jpg') center/cover no-repeat;
        }

        .section-content {
            text-align: center;
            animation: fadeInUp 1s ease-out;
        }

        .section-subtitle {
            font-size: 1.2rem;
            margin-top: 20px;
            opacity: 0.9;
            font-weight: normal;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .scroll-indicator {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
        }

        .scroll-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .scroll-dot.active {
            background: white;
            transform: scale(1.2);
        }

        .scroll-hint {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-10px);
            }
            60% {
                transform: translateX(-50%) translateY(-5px);
            }
        }

        .header-container {
            position: fixed; /* 固定在顶部 */
            top: 0;
            left: 0;
            width: 100%;
            padding: 15px 30px; /* 初始内边距 */
            display: flex;
            justify-content: space-between; /* Logo 和导航栏左右分布 */
            align-items: center;
            z-index: 1000; /* 确保在最上层 */
            transition: padding 0.5s ease, background 0.5s ease; /* 过渡效果，改为 background */
            /* background-color: transparent; */ /* 移除纯透明背景 */
            background: linear-gradient(to bottom, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 100%); /* 顶部轻微加深渐变 */
        }

        .header-container.scrolled {
            padding: 5px 20px; /* 滚动后减小内边距 */
            background: #FFFFFF; /* 滚动后背景变为纯白色 */
        }

        .logo {
            /* position: absolute; */ /* 不再需要绝对定位 */
            /* top: 30px; */
            /* left: 30px; */
            width: 600px; /* 增大初始宽度 */
            height: auto;
            /* z-index: 100; */
            opacity: 0.9;
            transition: opacity 0.3s ease, width 0.5s ease; /* 添加宽度过渡 */
        }

        .header-container.scrolled .logo {
            width: 450px; /* 调整滚动后缩小 Logo 的尺寸，缩小比例减小 */
        }

        .logo:hover {
            opacity: 1;
        }

        .nav-bar {
            /* position: absolute; */ /* 不再需要绝对定位 */
            /* top: 30px; */
            /* right: 30px; */
            width: auto; /* 宽度自适应内容 */
            height: auto; /* 高度自适应内容 */
            background: transparent; /* 保持透明背景 */
            box-shadow: none; /* 保持无阴影 */
            /* z-index: 100; */
            display: flex;
            align-items: center;
            /* justify-content: flex-end; */ /* 由父容器控制对齐 */
            padding-top: 0;
        }

        .nav-menu {
            display: flex;
            flex-direction: row; /* 改为横向排列 */
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 15px; /* 调整项目之间的间距 */
            width: auto; /* 宽度自适应内容 */
            align-items: center;
        }

        .nav-item {
            color: #FFFFFF; /* 初始颜色为白色 */
            font-size: 18px; /* 增大初始字体大小 */
            font-weight: 500; /* 可以适当加粗 */
            text-decoration: none;
            padding: 10px 15px; /* 调整内边距 */
            transition: color 0.5s ease, font-size 0.5s ease, padding 0.5s ease; /* 添加颜色和内边距过渡 */
            cursor: pointer;
            white-space: nowrap;
            text-align: center;
            width: auto; /* 宽度自适应内容 */
            border-bottom: none; /* 移除底部边框 */
            border-right: none; /* 移除右侧边框 */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7); /* 初始文字阴影，确保白色字体清晰 */
        }

        .header-container.scrolled .nav-item {
            color: #333333; /* 滚动后字体颜色变黑 */
            font-size: 16px; /* 调整滚动后字体大小，缩小比例减小 */
            padding: 8px 12px; /* 调整滚动后内边距 */
            text-shadow: none; /* 滚动后移除文字阴影，因为黑色字体在浅色背景上通常足够清晰 */
        }

        .nav-item:last-child {
            /* border-right: none; */ /* 此规则不再需要，因为所有项目的右边框都移除了 */
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* 确保内容区域不会被底部导航栏遮挡 */
        .container {
            height: 100vh;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* padding-bottom: 60px; */ /* 移除为底部导航栏留出的空间 */
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="header-container" id="headerContainer">
        <img src="img/$RDROL1K.png" alt="Logo" class="logo">
        <nav class="nav-bar">
            <ul class="nav-menu">
                <li><a href="#" class="nav-item active">首页</a></li>
                <li><a href="#" class="nav-item">学院概况</a></li>
                <li><a href="#" class="nav-item">机构设置</a></li>
                <li><a href="#" class="nav-item">党群工作</a></li>
                <li><a href="#" class="nav-item">教职员工</a></li>
                <li><a href="#" class="nav-item">本科生教育</a></li>
                <li><a href="#" class="nav-item">研究生教育</a></li>
                <li><a href="#" class="nav-item">科学研究</a></li>
                <li><a href="#" class="nav-item">国际合作</a></li>
            </ul>
        </nav>
    </div>
    <div class="container" id="container">
        <div class="section section1">
            <!-- Logo and Nav are now in header-container -->
        </div>
        
        <div class="section section2">
            <div class="image-part"></div>
            <div class="image-part"></div>
        </div>
        
        <div class="section section3">
        </div>
        
        <div class="section section4">
        </div>
    </div>

    <div class="scroll-indicator">
        <div class="scroll-dot active" data-section="0"></div>
        <div class="scroll-dot" data-section="1"></div>
        <div class="scroll-dot" data-section="2"></div>
        <div class="scroll-dot" data-section="3"></div>
    </div>

    <script>
        let currentSection = 0;
        const totalSections = 4;
        const container = document.getElementById('container');
        const dots = document.querySelectorAll('.scroll-dot');
        const headerContainer = document.getElementById('headerContainer'); // 获取 header 容器
        let isScrolling = false;

        function updateSection(sectionIndex) {
            if (sectionIndex < 0 || sectionIndex >= totalSections) return;
            
            currentSection = sectionIndex;
            const translateY = -currentSection * 100;
            container.style.transform = `translateY(${translateY}vh)`;
            
            // 更新指示器
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSection);
            });

            // 根据当前 section 更新 header 状态
            if (currentSection > 0) {
                headerContainer.classList.add('scrolled');
            } else {
                headerContainer.classList.remove('scrolled');
            }
        }

        function handleWheel(event) {
            if (isScrolling) return;
            
            isScrolling = true;
            
            if (event.deltaY > 0) {
                // 向下滚动
                if (currentSection < totalSections - 1) {
                    updateSection(currentSection + 1);
                }
            } else {
                // 向上滚动
                if (currentSection > 0) {
                    updateSection(currentSection - 1);
                }
            }
            
            setTimeout(() => {
                isScrolling = false;
            }, 800);
        }

        // 鼠标滚轮事件
        window.addEventListener('wheel', handleWheel, { passive: false });

        // 点击指示器切换
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                if (!isScrolling) {
                    updateSection(index);
                }
            });
        });

        // 键盘导航
        window.addEventListener('keydown', (event) => {
            if (isScrolling) return;
            
            if (event.key === 'ArrowDown' || event.key === 'PageDown') {
                event.preventDefault();
                if (currentSection < totalSections - 1) {
                    updateSection(currentSection + 1);
                }
            } else if (event.key === 'ArrowUp' || event.key === 'PageUp') {
                event.preventDefault();
                if (currentSection > 0) {
                    updateSection(currentSection - 1);
                }
            } else if (event.key === 'Home') {
                event.preventDefault();
                updateSection(0);
            } else if (event.key === 'End') {
                event.preventDefault();
                updateSection(totalSections - 1);
            }
        });

        // 触摸设备支持
        let touchStartY = 0;
        let touchEndY = 0;

        window.addEventListener('touchstart', (event) => {
            touchStartY = event.changedTouches[0].screenY;
        });

        window.addEventListener('touchend', (event) => {
            if (isScrolling) return;
            
            touchEndY = event.changedTouches[0].screenY;
            const touchDiff = touchStartY - touchEndY;
            
            if (Math.abs(touchDiff) > 50) {
                isScrolling = true;
                
                if (touchDiff > 0) {
                    // 向上滑动，显示下一层
                    if (currentSection < totalSections - 1) {
                        updateSection(currentSection + 1);
                    }
                } else {
                    // 向下滑动，显示上一层
                    if (currentSection > 0) {
                        updateSection(currentSection - 1);
                    }
                }
                
                setTimeout(() => {
                    isScrolling = false;
                }, 800);
            }
        });
    </script>
</body>
</html>